<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Enter CSV Data</title>
    <link rel="stylesheet" href="index.css" />
    <link rel="stylesheet" href="upload.css" />

  </head>
  <body>
    <div class="container">
      <button class="back-button" onclick="goBack()">Back</button>

      <!-- Initial Upload Section -->
      <div id="uploadSection">
        <h1>Enter CSV Data</h1>

        <div class="file-info">
          <div class="paper-code-container">
            <label for="paperCode">Paper Code:</label>
            <input
              type="text"
              id="paperCode"
              placeholder="Extracted from filename"
            />
          </div>
          <div class="line-count">Results: 0</div>
        </div>

        <div id="dropArea" class="drop-area">
          <div class="drop-content">
            <p>Drag & drop your CSV file here</p>
            <p>or</p>
            <button class="browse-button">Browse Files</button>
            <input
              type="file"
              id="fileInput"
              accept=".csv"
              style="display: none"
            />
          </div>
          <textarea
            id="csvInput"
            rows="10"
            placeholder="Or paste CSV data here (e.g., Category,Value\nA,30\nB,50...)"
          ></textarea>
        </div>

        <button
          id="initialSubmit"
          class="submit-button"
          onclick="previewData()"
        >
          Preview Data
        </button>
      </div>

      <!-- Preview Section (initially hidden) -->
      <div id="previewSection" class="preview-section" style="display: none">
        <div class="preview-header">
          <h2>Data Preview - <span id="previewPaperCode"></span></h2>
          <button class="back-to-edit" onclick="backToEdit()">
            &#x270E; Edit Data
          </button>
        </div>

        <div class="table-container">
          <table id="previewTable">
            <thead>
              <tr id="headerRow"></tr>
            </thead>
            <tbody id="tableBody"></tbody>
          </table>
        </div>

        <div class="preview-footer">
          <div class="row-count">Rows: <span id="rowCount">0</span></div>
          <button class="submit-button" onclick="submitCsv()">
            Confirm and Upload
          </button>
        </div>
      </div>
    </div>

    <div id="uploadModal" class="modal">
      <div class="modal-content">
        <span class="close">&times;</span>
        <p>Upload accomplished successfully!</p>
      </div>
    </div>

    <script src="upload.js"></script>
  </body>
</html>
